## JPA-basic Note



JPA에서 가장 중요한 2가지
- 객체와 관계형 데이터베이스 매핑하기
- 영속성 컨텍스트 (엔티티를 영구 저장하는 환경)

영속성 컨텍스트의 이점
- 1차 캐시는 한 번 조회한걸 또 조회하면 디비에 쿼리가 안날라간다. (동일한 트랜젝션)
- 동일성 보장
- 트랜잭션을 지원하는 쓰기 지연, 즉 버퍼링
- 변경 감지, 업데이트를 할 때
- 지연 로딩 (실무에서 중요한 개념이다. 뒤에서 많이 나올 예정)

플러시
- 영속성 컨텍스트에 현재 변경사항과 데이터베이스를 맞추는 작업이다.
- 즉 영속성 컨텍스트의 변경내용을 데이터베이스에 동기화하는 것이다.
- 데이터베이스 트랜젝션이 커밋되면 플러시가 자동으로 발생한다고 보면 된다.
- 트랜젝션 커밋과 JPQL 쿼리를 실행하면 플러시가 자동 호출된다. 
- 플러시는 영속성 컨텍스트를 비우는게 아니다.

필드와 컬럼 맵핑



기타
- 1차 캐시에 올라간 상태가 영속 상태이다. (즉 JPA 가 관리하는 상태를 말함)
- 영속성 컨텍스트는 눈에 보이는 개념은 아니다. 
- 엔티티매니저를 통해서 영속성 컨텍스트에 접근한다.
- 1차 캐시가 영속성 컨텍스트라고 이해하면 된다. (스프링과 함께 쓸 때는 약간의 개념이 바뀌니 참고)
- 테이블 중심이 아니라 객체 중심
- @Entity 가 붙은 클래스는 JPA 가 관리하는 객체고 이거를 데이터베이스 테이블과 맵핑한다.
- 데이터베이스 스키마 자동 생성
    

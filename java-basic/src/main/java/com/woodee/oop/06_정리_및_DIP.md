### 정리
- 소프트웨어의 가치는 변화다
    - 적은 비용으로 변화할 수 있는 방법 중 하나는 객체지향이다

객체
- 객체는 내부의 가진 데이터가 아니라 제공하는 기능으로 정의
- 이런 기능의 명세는 메서드 이름, 파라미터, 리턴 타입을 이용해서 작성

캡슐화
- 내부 구현을 감추는데 이는 외부의 주는 영향을 최소화해서 내부 구현을 보다 쉽게 변경할 수 있게 만들어준다

추상화
- 여러 구현의 공통점을 상위 타입으로 도출
- 추상화를 통해서 사용 대상을 변경할 수 있는 유연함을 얻을 수 있다

상속보단 조립
- 상속의 세 가지 단점
    1. 상위 클래스 변경이 어려움 
    2. 불필요한 클래스 증가
    3. 상속 오용
- 위의 문제를 조립하는 방법으로 없앨 수 있다

기능과 책임 분리
- 기능을 하위 기능으로 나누고 책임을 분리한다
- 한 메서드나 클래스가 커지면 절차지향 문제가 발생할 수 있기 때문에 분리 할 필요가 있다
- 네 가지 분리 방법
    1. 패턴 적용
    2. 계산 기능 분리
    3. 외부 연동 분리
    4. 조건별 분기는 추상화
- 적절한 책임을 분리하면 테스가 용이해진다

의존과 DI
- 의존 대상이 바뀌면 나도 바뀔 수 있기 때문에 의존 대상이 적을 수록 좋다
- 줄이는 방법으로 클래스의 기능 분리와 의존 대상을 합친다
- 의존을 줄이는 방법을 사용하면 의존 대상을 쉽게 변경 할 수 있고 대역을 통해 쉬운 테스트가 가능하다

### DIP 
#### 고수준 모듈
- 의미 있는 단일 기능을 제공
- 상위 수준의 정책 구현
```java
// 예
도면 이미지를 저장하고
측정 정보를 저장하고
도면 수정 의뢰를 한다
```

#### 저수준 모듈
- 고수준 모듈 기능을 구현하기 위해 필요한 하위 기능의 실제 구현
```java
// 예
NAS에 이미지를 저장한다
MEAS_INFO 테이블에 저장한다
BP_MOD_REQ 테이블에 저장한다
```

고수준이 저수준에 직접 의존하면
- 고수준 정책이 바뀌지 않았으나 저수준 구현 변경으로 코드 변경비 발생
- 저수준이 바뀌면서 고수준이 바뀌는 문제를 방지하는 원칙이 DIP다
    - 의존 역전 원칙(Dependency Inversion Principle)
    - 고수준 모듈이 저수준 모듈의 구현에 의존하면 안된다
    - 저수준 모듈이 고수준 모듈에서 정의한 추상타입에 의존해야 한다

고수준 관점에서 추상화
- DIP에서 하위 기능에 대한 추상 타입을 도출 할 때에는 고수준 입장에서 추상화 해야한다(저수준 입장에서 추상화 하면 안 된다)
- 고수준 입장에서 저수준 모듈을 추상화 해야한다

DIP를 적용하면
- 고수준 모듈을 변경하지 않아도 저수준 모듈을 변경 할 수 있는 유연함이 생긴다

부단한 추상화 노력 필요
- 처음부터 바로 좋은 설계가 나오지는 않는다
- 요구사항이나 업무에 대한 이해가 높아지면서 그때 비로소 저수준, 고수준 모듈을 인지하게 된다

#### 연습
분류 하기 전
- 상품 상세 정보와 추천 상품 목록 제공을 기능
    - 상품 번호를 이용해서 상품 DB에서 상세 정보를 구함
    - Daara API를 이용해서 추천 상품 5개를 구한다
    - 추천 상품이 5개 미만이면 같은 분류에 속한 상품 중 최근 한 달 판매가 많은 상품을 ERP에서 구해서 5개를 채운다

분류 후
- 고수준 모듈에 해당하는 하위 기능 
    - ProductDataService
        - <<Interface>>ProductRepository (하위 기능을 추상화한 타입)
        - <<Interface>>ProductRecommender (하위 기능을 추상화한 타입)
        - <<Interface>>PopularProductService (하위 기능을 추상화한 타입)
    - 상품 번호로 상품 상세 정보를 구함
    - 추천 상품 5개를 구함
    - 인기 상품을 구함
- 각 하위 기능에 대한 저수준 구현
    - DB에서 상세 정보 구함 / DBProductRepository 
    - Daara API에서 상품 5개를 구함 / DaaraRecommender
    - 같은 분류에 속한 상품에서 최근 한 달 판매가 많은 상품 ERP에서 구함 / ErpPopularProductService


